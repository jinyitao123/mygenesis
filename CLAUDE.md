### 🎮 Project Genesis - 生成式仿真平台

### 🔄 项目意识与上下文
- **始终阅读 `docs/plans/` 下的设计文档**以理解项目架构和目标
- **检查 `CLAUDE.md` 和 `TASK.md`**确保遵循项目约定
- **使用中文进行所有交流**（用户明确要求）
- **遵循三层架构**：Python 胶水层 + Neo4j 持久层 + LLM 语义层

### 🧱 代码结构与模块化
- **单文件不超过 300 行代码**
- **模块化组织**：
  - `graph_client.py` - 图数据库操作（DAO层）
  - `llm_engine.py` - LLM交互与提示词管理
  - `main.py` - 游戏主循环编排
- **使用 python-dotenv 管理环境变量**
- **所有字符串使用中文**（游戏面向中文用户）

### 🧪 测试与可靠性
- **使用 pytest 进行测试**
- **测试文件放在 `/tests` 目录**，镜像主应用结构
- **每个核心函数至少包含**：
  - 1个正常用例测试
  - 1个边界情况测试
  - 1个错误处理测试

### ✅ 任务完成
- **立即标记已完成任务**
- **将新发现的 TODO 添加到任务列表**

### 📎 风格与约定
- **使用 Python 3.9+**
- **遵循 PEP8**，使用类型提示
- **使用 Pydantic 进行数据验证**
- **函数文档字符串使用 Google 风格**
- **复杂逻辑添加 `# Reason:` 注释解释原因**

### 🧠 AI 行为规则
- **不确定时主动提问，绝不假设**
- **只使用已知、经过验证的 Python 包**
- **引用文件前确认路径存在**
- **绝不删除或覆盖现有代码，除非明确指示**

### 🎯 项目特定规则
- **优先使用 OpenAI GPT-4o 进行世界生成，GPT-3.5-turbo 进行意图解析**
- **所有 Cypher 查询必须验证连通性（防止穿墙）**
- **JSON 输出强制使用 `response_format={"type": "json_object"}`**
- **Neo4j 节点必须包含 id（英文唯一标识符）和 name（中文显示名）**
- **错误处理：LLM 失败时回退到静态模板，Neo4j 失败时提供清晰错误提示**
